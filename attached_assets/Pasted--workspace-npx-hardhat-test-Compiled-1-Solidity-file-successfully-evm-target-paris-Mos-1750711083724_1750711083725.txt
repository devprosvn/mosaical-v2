~/workspace$ npx hardhat test
Compiled 1 Solidity file successfully (evm target: paris).


  Mosaical MVP Test Suite
    Governance System
      ✔ Should create proposals
      ✔ Should handle voting process
    NFT Vault System
      ✔ Should deposit NFT and calculate correct LTV
      ✔ Should handle risk tier updates
      ✔ Should prevent unauthorized withdrawals
    NFT Vault Loan System
      1) Should create loan with correct parameters
      2) Should handle simple loan repayment
    DPO Token System
      3) Should mint DPO tokens on loan creation
      4) Should handle DPO token trading
      5) Should distribute and claim interest
    Oracle System
      ✔ Should provide accurate NFT pricing
      ✔ Should track price history and volatility
      ✔ Should update game metrics
      Bridge System
        ✔ Should setup Saga chainlet mappings
        ✔ Should setup cross-chain mappings
        ✔ Should initiate NFT bridging to Saga chainlet
        ✔ Should initiate NFT bridging
      Security Tests
        ✔ Should prevent unauthorized access
        ✔ Should prevent borrowing without collateral
        6) Should prevent exceeding LTV limits
      Integration Tests
        ✔ Should validate devpros chainlet configuration
        7) Should complete full lending cycle


  15 passing (2s)
  7 failing

  1) Mosaical MVP Test Suite
       NFT Vault Loan System
         Should create loan with correct parameters:
     Error: VM Exception while processing transaction: reverted with reason string 'Amount exceeds max borrow'
    at NFTVaultV3.withdrawNFT (contracts/NFTVaultV3.sol:136)
    at NFTVaultV3.borrow (contracts/NFTVaultV3.sol:147)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.borrow (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (test/MosaicalMVP.test.js:184:7)
  

  2) Mosaical MVP Test Suite
       NFT Vault Loan System
         Should handle simple loan repayment:
     Error: VM Exception while processing transaction: reverted with reason string 'Amount exceeds max borrow'
    at NFTVaultV3.withdrawNFT (contracts/NFTVaultV3.sol:136)
    at NFTVaultV3.borrow (contracts/NFTVaultV3.sol:147)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.borrow (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (test/MosaicalMVP.test.js:207:7)
  

  3) Mosaical MVP Test Suite
       DPO Token System
         Should mint DPO tokens on loan creation:
     Error: VM Exception while processing transaction: reverted with reason string 'Amount exceeds max borrow'
    at NFTVaultV3.withdrawNFT (contracts/NFTVaultV3.sol:136)
    at NFTVaultV3.borrow (contracts/NFTVaultV3.sol:147)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.borrow (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (test/MosaicalMVP.test.js:238:7)
  

  4) Mosaical MVP Test Suite
       DPO Token System
         Should handle DPO token trading:
     Error: VM Exception while processing transaction: reverted with reason string 'Amount exceeds max borrow'
    at NFTVaultV3.withdrawNFT (contracts/NFTVaultV3.sol:136)
    at NFTVaultV3.borrow (contracts/NFTVaultV3.sol:147)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.borrow (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (test/MosaicalMVP.test.js:266:7)
  

  5) Mosaical MVP Test Suite
       DPO Token System
         Should distribute and claim interest:
     Error: VM Exception while processing transaction: reverted with reason string 'Amount exceeds max borrow'
    at NFTVaultV3.withdrawNFT (contracts/NFTVaultV3.sol:136)
    at NFTVaultV3.borrow (contracts/NFTVaultV3.sol:147)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.borrow (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (test/MosaicalMVP.test.js:317:7)
  

  6) Mosaical MVP Test Suite
       Oracle System
         Security Tests
           Should prevent exceeding LTV limits:
     AssertionError: Expected transaction to be reverted with reason 'Exceeds max LTV', but it reverted with reason 'Amount exceeds max borrow'
      at Context.<anonymous> (test/MosaicalMVP.test.js:518:7)

  7) Mosaical MVP Test Suite
       Oracle System
         Integration Tests
           Should complete full lending cycle:
     Error: VM Exception while processing transaction: reverted with reason string 'Amount exceeds max borrow'
    at NFTVaultV3.withdrawNFT (contracts/NFTVaultV3.sol:136)
    at NFTVaultV3.borrow (contracts/NFTVaultV3.sol:147)
    at EdrProviderWrapper.request (node_modules/hardhat/src/internal/hardhat-network/provider/provider.ts:359:41)
    at HardhatEthersSigner.sendTransaction (node_modules/@nomicfoundation/hardhat-ethers/src/signers.ts:181:18)
    at send (node_modules/ethers/src.ts/contract/contract.ts:313:20)
    at Proxy.borrow (node_modules/ethers/src.ts/contract/contract.ts:352:16)
    at Context.<anonymous> (test/MosaicalMVP.test.js:557:7)
  